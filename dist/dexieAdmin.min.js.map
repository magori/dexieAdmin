{"version":3,"sources":["dexieAdmin.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","DbManagerController","$scope","$log","$uibModal","$timeout","dbManagerService","_this","this","dbManager","onRefresh","tables","getDb","displayData","selectedTable","$inject","$event","classCss","promise","_this2","stopPropagation","element","angular","find","addClass","then","removeClass","animate","loadAll","table","load","hasActionLoad","hasTrash","createDb","deleteAllTable","delete","drop","dump","dumpTable","textSearch","_this3","search","result","dataTable","$digest","_this4","selectedTableIndexes","resolveColumns","buildData","list","data","log","open","controller","json","templateUrl","controllerAs","size","resolve","JSON","stringify","k","v","undefined","replace","2","DbManagerDirective","directive","restrict","template","_dbManager","bindToController","./dbManager.controller","3","_dbManager2","service","DbManagerService","./dbManager/dbManager.directive","./service/dbManager.service","4","DbDump","rn","_config","db","dbName","name","tableDef","createTblesDef","toArray","objects","defTables","map","primKeyAndIndexes","schema","primKey","concat","indexes","schemaSyntax","index","src","join","self","Promise","verno","defs","keys","p","all","dumpDataTable","finally","5","_typeof","Symbol","iterator","obj","constructor","_dbDumpService","dbManagerConfig","config","previsouSearch","countTupleForEachTable","dbDump","actionsLoad","resolveConfigType","context","onNewDb","tableName","columns","columnsToDisplay","forEach","indexe","filter","conf","dottedIndexes","inedexe","includes","push","split","reduce","type","tablesConfig","tableConfig","resolveActionLoad","trashConfig","action","countTupleTable","Pormise","Dexie","version","stores","_this5","clear","_this6","_this7","createFileAndDowload","talbe","_this8","_this9","count","nb","nbRow","_this10","toUpperCase","indexOf","valstring","valuesToString","_ret","substr","_ret2","trim","toLowerCase","isNaN","parseFloat","isFinite","text","Blob","url","window","URL","createObjectURL","document","createElement","style","href","download","Date","getTime","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","values","arguments","hasOwnProperty","val","./dbDump.service.js"],"mappings":"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","file":"dexieAdmin.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DbManagerController = exports.DbManagerController = function () {\n  DbManagerController.$inject = [\"$scope\", \"$log\", \"$uibModal\", \"$timeout\", \"dbManagerService\"];\n  function DbManagerController($scope, $log, $uibModal, $timeout, dbManagerService) {\n    'ngInject';\n\n    var _this = this;\n\n    _classCallCheck(this, DbManagerController);\n\n    this.$timeout = $timeout;\n    this.$log = $log;\n    this.$scope = $scope;\n    this.$uibModal = $uibModal;\n    this.dbManager = dbManagerService;\n    this.dbManager.onRefresh(function () {\n      _this.tables = _this.dbManager.getDb().tables;\n      _this.displayData(_this.selectedTable);\n    });\n    this.tables = this.dbManager.getDb().tables;\n    this.displayData(this.tables[0]);\n  }\n\n  _createClass(DbManagerController, [{\n    key: \"animate\",\n    value: function animate($event, classCss, promise) {\n      var _this2 = this;\n\n      $event.stopPropagation();\n      var element = angular.element($event.target);\n      var i = element.find(\"i\");\n      if (i.length) {\n        element = i;\n      }\n      element.addClass(classCss + \" animated\");\n      promise.then(function () {\n        return _this2.$timeout(function () {\n          return element.removeClass(classCss + \" animated\");\n        });\n      });\n    }\n  }, {\n    key: \"loadAll\",\n    value: function loadAll($event) {\n      this.animate($event, 'fa-spin', this.dbManager.loadAll());\n    }\n  }, {\n    key: \"load\",\n    value: function load($event, table) {\n      this.animate($event, 'fa-spin', this.dbManager.load(table));\n    }\n  }, {\n    key: \"hasActionLoad\",\n    value: function hasActionLoad(table) {\n      return this.dbManager.hasActionLoad(table);\n    }\n  }, {\n    key: \"hasTrash\",\n    value: function hasTrash(table) {\n      return this.dbManager.hasTrash(table);\n    }\n  }, {\n    key: \"createDb\",\n    value: function createDb() {\n      return this.dbManager.createDb();\n    }\n  }, {\n    key: \"deleteAllDb\",\n    value: function deleteAllDb($event) {\n      this.animate($event, 'faa-flash', this.dbManager.deleteAllTable());\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete($event, table) {\n      this.animate($event, 'faa-flash', this.dbManager.delete(table));\n    }\n  }, {\n    key: \"drop\",\n    value: function drop($event) {\n      this.animate($event, 'faa-flash', this.dbManager.drop());\n    }\n  }, {\n    key: \"dump\",\n    value: function dump($event) {\n      this.animate($event, 'faa-flash', this.dbManager.dump());\n    }\n  }, {\n    key: \"save\",\n    value: function save($event, table) {\n      this.animate($event, 'faa-flash', this.dbManager.dumpTable(table));\n    }\n  }, {\n    key: \"search\",\n    value: function search(textSearch) {\n      var _this3 = this;\n\n      this.dbManager.search(textSearch, this.selectedTable).then(function (result) {\n        _this3.dataTable = result;\n        _this3.$scope.$digest();\n      });\n    }\n  }, {\n    key: \"displayData\",\n    value: function displayData(table) {\n      var _this4 = this;\n\n      this.selectedTable = table;\n      this.selectedTableIndexes = this.dbManager.resolveColumns(table);\n      this.dbManager.buildData(table).then(function (list) {\n        return _this4.dataTable = list;\n      }).then(function () {\n        return _this4.$scope.$digest();\n      });\n    }\n  }, {\n    key: \"displayRow\",\n    value: function displayRow(data) {\n      this.$log.log(data);\n      this.$uibModal.open({\n        controller: ['$scope', 'json', function ($scope, json) {\n          $scope.json = json;\n        }],\n        templateUrl: 'displayJson.html',\n        controllerAs: 'jsonCtrl',\n        size: 'lg',\n        resolve: {\n          json: function json() {\n            return JSON.stringify(data, function (k, v) {\n              return k != '$$hashKey' ? v : undefined;\n            }, 2).replace(/\\{/g, \"\").replace(/\\}/g, \"\").replace(/\\s\\s+\\n/g, \"\");\n          }\n        }\n      });\n    }\n  }]);\n\n  return DbManagerController;\n}();\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DbManagerDirective = DbManagerDirective;\n\nvar _dbManager = require('./dbManager.controller');\n\nfunction DbManagerDirective() {\n  'ngInject';\n\n  var directive = {\n    restrict: 'E',\n    template: '<style>\\r\\n\\r\\n</style><script type=\"text/ng-template\" id=\"displayJson.html\"><pre> {{json}} </pre></script><div class=\"row\"><div class=\"col-xs-3\"><div class=\"panel panel-default\"><div class=\"panel-heading clearfix\"><div class=\"btn-toolbar\" role=\"toolbar\"><div class=\"btn-group pull-right\"><div ng-click=\"dbManger.dump($event)\" class=\"btn btn-default\" title=\"Dump\"><i class=\"fa fa-floppy-o\" aria-hidden=\"true\"></i></div><div ng-click=\"dbManger.loadAll($event)\" class=\"btn btn-default\" title=\"Load all\"><i class=\"fa fa-refresh\" aria-hidden=\"true\"></i></div><div ng-click=\"dbManger.deleteAllDb($event)\" class=\"btn btn-default\" title=\"Empty DB\"><i class=\"fa fa-trash-o\" aria-hidden=\"true\"></i></div><div ng-click=\"dbManger.drop($event)\" class=\"btn btn-danger\" title=\"Drop\"><i class=\"fa fa-trash-o\" aria-hidden=\"true\"></i></div></div></div></div><div class=\"list-group\" ng-repeat=\"table in dbManger.tables track by table.name\" ng-click=\"dbManger.displayData(table)\"><div class=\"list-group-item\" ng-class=\"dbManger.selectedTable.name===table.name ? \\'active\\':\\'\\'\" style=\"cursor:pointer\"><div class=\"list-group-item-heading clearfix\"><div class=\"pull-left panel-title\"><span class=\"badge\">{{table.nbRow}}</span> <span class=\"panel-title\" style=\"padding-top: 7.5px;\">{{table.name}}</span></div><div class=\"btn-group pull-right\"><div ng-if=\"dbManger.hasActionLoad(table)\" ng-click=\"dbManger.load($event,table)\" class=\"btn btn-default\" title=\"Load table\"><i class=\"fa fa-refresh\" aria-hidden=\"true\"></i></div><div ng-click=\"dbManger.save($event, table)\" class=\"btn btn-default\" title=\"Dump table\"><i class=\"fa fa-floppy-o\" fa-stack-1x aria-hidden=\"true\"></i></div><div ng-if=\"dbManger.hasTrash(table)\" ng-click=\"dbManger.delete($event, table)\" class=\"btn btn-default\" title=\"Clear table\"><i class=\"fa fa-trash-o\" fa-stack-1x aria-hidden=\"true\"></i></div></div></div><p class=\"list-group-item-text\"><i class=\"fa fa-key\" aria-hidden=\"true\"></i> {{table.schema.primKey.name}} : {{table.schema.primKey.auto}}</p><p class=\"list-group-item-text\"></p>index: <span ng-repeat=\"indexe in table.schema.indexes\">{{indexe.src}},</span><p></p></div></div></div></div><div class=\"col-xs-9\"><div class=\"panel panel-primary\"><div class=\"panel-heading\">{{dbManger.selectedTable.name}}</div><div class=\"panel-body\"><form><div class=\"row\"><div class=\"form-group col-xs-12\"><div class=\"input-group input-group\"><span class=\"input-group-addon\"><i class=\"fa fa-search\" aria-hidden=\"true\"></i></span> <input type=\"text\" class=\"form-control\" ng-change=\"dbManger.search(dbManger.searchValue)\" ng-model-options=\"{ debounce: 250 }\" ng-model=\"dbManger.searchValue\"> <span class=\"input-group-addon\"><span class=\"badge\">{{dbManger.dataTable.length}}</span></span></div></div></div></form><div style=\"height: 70vh !important;overflow-y: auto;\"><table class=\"table table-striped table-condensed\"><colgroup><col class=\"{{::dbManger.selectedTable.schema.primKey.name}}\"><col ng-repeat=\"indexe in dbManger.selectedTable.schema.indexes\" class=\"{{::indexe.name}}\"></colgroup><thead><tr><th><i class=\"fa fa-key\" aria-hidden=\"true\"></i>PK</th><th ng-repeat=\"indexe in dbManger.selectedTableIndexes\">{{::indexe}}</th></tr></thead><tbody><tr ng-repeat=\"data in dbManger.dataTable | limitTo:150\" ng-click=\"dbManger.displayRow(data)\"><td>{{data[dbManger.selectedTable.schema.primKey.name]}}</td><td ng-repeat=\"indexe in dbManger.selectedTableIndexes\">{{data[indexe]}}</td></tr></tbody></table></div></div></div></div></div>',\n    controller: _dbManager.DbManagerController,\n    controllerAs: 'dbManger',\n    bindToController: true\n  };\n\n  return directive;\n}\n},{\"./dbManager.controller\":1}],3:[function(require,module,exports){\n'use strict';\n\nvar _dbManager = require('./service/dbManager.service');\n\nvar _dbManager2 = require('./dbManager/dbManager.directive');\n\nangular.module('dexieAdmin', ['ui.bootstrap']).service('dbManagerService', _dbManager.DbManagerService).directive('dbManager', _dbManager2.DbManagerDirective);\n},{\"./dbManager/dbManager.directive\":2,\"./service/dbManager.service\":5}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DbDump = function () {\n    function DbDump() {\n        'ngInject';\n\n        _classCallCheck(this, DbDump);\n\n        this.rn = \"\\r\\n\";\n    }\n\n    _createClass(DbDump, [{\n        key: \"config\",\n        value: function config(_config) {\n            if (_config) {\n                this.db = _config.db;\n                this.dbName = this.db.name + \"\";\n                this.tables = this.db.tables;\n                this.tableDef = this.createTblesDef();\n            }\n        }\n    }, {\n        key: \"dumpTable\",\n        value: function dumpTable(table) {\n            var _this = this;\n\n            return table.toArray(function (list) {\n                var rn = _this.rn;\n                var objects = JSON.stringify(list);\n                return rn + \"//-\" + table.name + rn + \" db.\" + table.name + \".bulkPut(\" + objects + \")\";\n            });\n        }\n    }, {\n        key: \"createTblesDef\",\n        value: function createTblesDef() {\n            var defTables = {};\n            this.db.tables.map(function (table) {\n                var primKeyAndIndexes = [table.schema.primKey].concat(table.schema.indexes);\n                var schemaSyntax = primKeyAndIndexes.map(function (index) {\n                    return index.src;\n                }).join(',');\n                defTables[table.name] = schemaSyntax;\n            });\n            return defTables;\n        }\n    }, {\n        key: \"dump\",\n        value: function dump() {\n            var _this2 = this;\n\n            var db = this.db,\n                self = this,\n                rn = this.rn;\n            var promise = new Promise(function (resolve) {\n                db.open().then(function () {\n                    var dump = \"var db = new Dexie('\" + db.name + \"') \" + rn + \" db.version(\" + db.verno + \").stores({ \" + rn;\n                    var defs = self.createTblesDef();\n                    dump = dump + Object.keys(defs).map(function (key) {\n                        var schemaSyntax = defs[key];\n                        return \"  \" + key + \": '\" + schemaSyntax + \"'\";\n                    }).join(\",\" + rn);\n                    return \"\" + rn + dump + \"});\" + rn;\n                }).then(function (dump) {\n                    var p = db.tables.map(function (table) {\n                        return self.dumpTable(table);\n                    });\n                    Promise.all(p).then(function (dumpDataTable) {\n                        resolve(dump + \"//#### Datas #####\" + _this2.rn + dumpDataTable.join(\";\") + \";\");\n                    });\n                    return dump;\n                }).finally(function () {\n                    //db.close();\n                });\n            });\n            return promise;\n        }\n    }]);\n\n    return DbDump;\n}();\n\nexports.DbDump = DbDump;\n},{}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DbManagerService = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global Pormise:false*/\n\n\nvar _dbDumpService = require('./dbDump.service.js');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DbManagerService = function () {\n  DbManagerService.$inject = [\"dbManagerConfig\"];\n  function DbManagerService(dbManagerConfig) {\n    'ngInject';\n\n    _classCallCheck(this, DbManagerService);\n\n    this.config(dbManagerConfig);\n    this.previsouSearch = \"\";\n    this.countTupleForEachTable();\n  }\n\n  _createClass(DbManagerService, [{\n    key: 'config',\n    value: function config(_config) {\n      this.config = _config;\n      this.db = _config.getDb();\n      this.tables = this.db.tables;\n      this.dbDump = new _dbDumpService.DbDump();\n      this.dbDump.config({\n        db: this.db\n      });\n      var actionsLoad = this.resolveConfigType('load');\n      this.actionsLoad = actionsLoad;\n      this.context = _config.context;\n      this.onNewDb = _config.onNewDb();\n    }\n  }, {\n    key: 'columnsToDisplay',\n    value: function columnsToDisplay(tableName) {\n      return this.resolveConfigType('columns')[tableName];\n    }\n  }, {\n    key: 'resolveColumns',\n    value: function resolveColumns(table) {\n      var columns = this.columnsToDisplay(table.name);\n      if (!columns) {\n        columns = {};\n      }\n      table.schema.indexes.forEach(function (indexe) {\n        if (columns[indexe.name] === undefined) {\n          columns[indexe.name] = true;\n        }\n      });\n      var columnsToDisplay = [];\n      columnsToDisplay = Object.keys(columns).filter(function (key) {\n        var conf = columns[key];\n        if (conf === false) {\n          return false;\n        }\n        return true;\n      });\n      return columnsToDisplay;\n    }\n  }, {\n    key: 'buildData',\n    value: function buildData(table) {\n      var selectedTableIndexes = this.resolveColumns(table);\n      var dottedIndexes = selectedTableIndexes.filter(function (inedexe) {\n        return inedexe.includes(\".\");\n      });\n      var indexes = [];\n      dottedIndexes.forEach(function (indexe) {\n        indexes.push({\n          key: indexe,\n          value: indexe.split('.')\n        });\n      });\n      return table.toArray().then(function (list) {\n        list.map(function (data) {\n          indexes.forEach(function (indexe) {\n            var key = indexe.key;\n            var value = indexe.value;\n\n            data[key] = value.reduce(function (obj, key) {\n              return obj[key] ? obj[key] : '';\n            }, data);\n          });\n          return data;\n        });\n        return list;\n      }).then(function (list) {\n        return list;\n      });\n    }\n  }, {\n    key: 'resolveConfigType',\n    value: function resolveConfigType(type) {\n      var _this = this;\n\n      var config = {};\n      Object.keys(this.config.tablesConfig()).forEach(function (table) {\n        var tableConfig = _this.config.tablesConfig()[table];\n        if (tableConfig && tableConfig[type] != undefined) {\n          config[table] = tableConfig[type];\n        }\n      });\n      return config;\n    }\n  }, {\n    key: 'onRefresh',\n    value: function onRefresh(call) {\n      this.onRefresh = call;\n    }\n  }, {\n    key: 'loadAll',\n    value: function loadAll() {\n      var _this2 = this;\n\n      return Promise.all(this.tables.map(function (table) {\n        return _this2.load(table);\n      }));\n    }\n  }, {\n    key: 'hasActionLoad',\n    value: function hasActionLoad(table) {\n      return this.resolveActionLoad(table);\n    }\n  }, {\n    key: 'hasTrash',\n    value: function hasTrash(table) {\n      var trashConfig = this.resolveConfigType('trash');\n      if (trashConfig[table.name] === false) {\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: 'resolveActionLoad',\n    value: function resolveActionLoad(table) {\n      return this.actionsLoad[table.name];\n    }\n  }, {\n    key: 'load',\n    value: function load(table) {\n      var _this3 = this;\n\n      var action = this.resolveActionLoad(table);\n      if (action) {\n        var promise = this.context ? action.call(this.context) : action(),\n            self = this;\n        if (promise && promise.then) {\n          return promise.then(function () {\n            return self.countTupleTable(table);\n          }).then(function () {\n            return _this3.onRefresh();\n          });\n        } else {\n          return new Pormise(function () {\n            _this3.countTupleTable(table);\n            _this3.onRefresh();\n          });\n        }\n      }\n    }\n  }, {\n    key: 'createDb',\n    value: function createDb() {\n      var db = new Dexie(this.dbDump.dbName);\n      db.version(1).stores(this.dbDump.tableDef);\n      return db;\n    }\n  }, {\n    key: 'deleteAllTable',\n    value: function deleteAllTable() {\n      var _this4 = this;\n\n      return Promise.all(this.tables.map(function (table) {\n        return _this4.hasTrash(table) ? _this4.delete(table) : false;\n      }));\n    }\n  }, {\n    key: 'delete',\n    value: function _delete(table) {\n      var _this5 = this;\n\n      return table.clear().then(function () {\n        return _this5.countTupleTable(table);\n      }).then(function () {\n        return _this5.onRefresh();\n      });\n    }\n  }, {\n    key: 'drop',\n    value: function drop() {\n      var _this6 = this;\n\n      return this.db.delete().then(function () {\n        return _this6.createDb().open();\n      }).then(function (db) {\n        _this6.db = db;\n        if (_this6.onNewDb) {\n          _this6.onNewDb(_this6.db);\n        }\n        _this6.tables = db.tables;\n        _this6.dbDump.config({\n          db: db\n        });\n        _this6.countTupleForEachTable();\n      });\n    }\n  }, {\n    key: 'dump',\n    value: function dump() {\n      var _this7 = this;\n\n      return this.dbDump.dump().then(function (dump) {\n        return _this7.createFileAndDowload(dump);\n      });\n    }\n  }, {\n    key: 'dumpTable',\n    value: function dumpTable(talbe) {\n      var _this8 = this;\n\n      return this.dbDump.dumpTable(talbe).then(function (dump) {\n        return _this8.createFileAndDowload(dump);\n      });\n    }\n  }, {\n    key: 'countTupleForEachTable',\n    value: function countTupleForEachTable() {\n      var _this9 = this;\n\n      return this.tables.map(function (table) {\n        _this9.countTupleTable(table);\n      });\n    }\n  }, {\n    key: 'countTupleTable',\n    value: function countTupleTable(table) {\n      return table.count().then(function (nb) {\n        table.nbRow = nb;\n      });\n    }\n  }, {\n    key: 'search',\n    value: function search(textSearch, table) {\n      var _this10 = this;\n\n      var search = textSearch.toUpperCase();\n      if (search.indexOf(\":\") == 0) {\n        var _ret = function () {\n          var t = search.substr(1).split(\"=\");\n          if (t.length > 1) {\n            var _ret2 = function () {\n              var key = t[0].trim().toLowerCase();\n              return {\n                v: {\n                  v: _this10.buildData(table).then(function (list) {\n                    if (list[0][key]) {\n                      list = list.filter(function (v) {\n                        var value = v[key];\n                        if (!isNaN(parseFloat(value)) && isFinite(value)) {\n                          return value == t[1] * 1;\n                        } else {\n                          return value.toUpperCase().includes(t[1]);\n                        }\n                      });\n                    }\n                    return list;\n                  })\n                }\n              };\n            }();\n\n            if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n          }\n          return {\n            v: new Promise(function () {})\n          };\n        }();\n\n        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      } else {\n        return this.buildData(table).then(function (list) {\n          list = list.map(function (v) {\n            v.valstring = _this10.valuesToString(v);\n            return v;\n          }).filter(function (v) {\n            return v.valstring.includes(search);\n          });\n          return list;\n        });\n      }\n    }\n  }, {\n    key: 'createFileAndDowload',\n    value: function createFileAndDowload(text) {\n      var data = new Blob([text], {\n        type: 'text/plain'\n      });\n      var url = window.URL.createObjectURL(data);\n      var a = document.createElement('a');\n      a.style = \"display: none\";\n      a.href = url;\n      a.download = \"dump_\" + new Date().getTime() + \".txt\";\n      document.body.appendChild(a);\n      a.click();\n      setTimeout(function () {\n        document.body.removeChild(a);\n        window.URL.revokeObjectURL(url);\n      }, 50);\n    }\n  }, {\n    key: 'valuesToString',\n    value: function valuesToString(obj) {\n      var values = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var val = obj[key];\n          if (val instanceof Object) {\n            values = values + this.valuesToString(val);\n          } else {\n            values = values + ' ' + obj[key];\n          }\n        }\n      }\n      return values.toUpperCase();\n    }\n  }, {\n    key: 'getDb',\n    value: function getDb() {\n      return this.db;\n    }\n  }]);\n\n  return DbManagerService;\n}();\n\nexports.DbManagerService = DbManagerService;\n},{\"./dbDump.service.js\":4}]},{},[3]);\n"],"sourceRoot":"/source/"}